<?php Class Manage extends Auth_Controller  { 	var $data = array();	//use `Auth_Controller` if you want the page to be validated if the user is logged in or not, if you want to disable this then use `CI_Controller` instead	public  function __construct(){		parent::__construct();		$this->load->model('manage_model');		$this->load->helper('url');		$this->load->library('session');  		$this->load->helper(array('form', 'url'));  		//$this->has_permission(178);		$this->data = $this->get_privs();	}		public function callresult($cr=''){		$this->has_permission(194);		$iden = 0;				$nationality_arr = $card_request = '';		if($cr == ''){			$this->set_header_data('','Manage Callresult');			$cr= 'callresult';			$iden = 1;													//added by mon @2021-07-10 to make "Nationality" lookup dynamic			//in regards with adding code and description if NEEDED			$nationality_arr[] = array(	'id'=>'nationality',										'lu_code'=>'nationality',										'lu_desc'=>'nationality',										'lu_cat'=>'nationality',										'order_by'=>1,										'is_active'=>1,										'is_legacy'=>1,										'no_edit'=>1,);													//added by mon @2021-07-18 to make "card_request" lookup dynamic			//in regards with adding code and description if NEEDED			$card_request[] = array(	'id'=>'CardRequest',										'lu_code'=>'CardRequest',										'lu_desc'=>'CardRequest',										'lu_cat'=>'CardRequest',										'order_by'=>1,										'is_active'=>1,										'is_legacy'=>1,										'no_edit'=>1,);															//added by mon @2023-01-28 to make "Source of Fund" lookup dynamic			$sof_arr[] = array(			'id'=>'sof',										'lu_code'=>'sof',										'lu_desc'=>'Source of Fund',										'lu_cat'=>'sof',										'order_by'=>1,										'is_active'=>1,										'is_legacy'=>1,										'no_edit'=>1,);		}				$data['cr_with_sub']  = $this->get_cr_with_sub();				$cr_arr = $this->getLookup($cr,0);		if(is_array($nationality_arr)){			//added by mon @2021-07-10			$cr_arr = array_merge($nationality_arr,$cr_arr);			$data['cr_with_sub'][] = 'nationality';		}				if(is_array($card_request)){			//added by mon @2021-07-18			$cr_arr = array_merge($card_request,$cr_arr);			$data['cr_with_sub'][] = 'CardRequest';		}				if(isset($sof_arr) &&is_array($sof_arr)){			//added by mon @2023-01-28			$cr_arr = array_merge($sof_arr,$cr_arr);			$data['cr_with_sub'][] = 'sof';		}				$data['callresult'] = $cr_arr;		$data['cr'] = $cr;		$data['iden'] = $iden;		$this->load->view('manage/callresult',$data);				if($cr == '')			$this->load->view('templates/footer.php');	}		public function save_cr($luID=0){		$this->manage_model->save_cr($luID);	}		public 	function scripts($page=1){		$pdata = $this->input->post();		if(isset($pdata['script'])){			$this->manage_model->save_script();		}		$this->set_header_data('','Manage Script');		$data['script'] = $this->get_script($page);		$this->load->view('manage/script',$data);		$this->load->view('templates/footer.php');	}		public 	function faqs(){		$pdata = $this->input->post();		if(isset($pdata['faqs'])){			$this->manage_model->save_faqs();		}		$this->set_header_data('','Manage FAQs');		$data['script'] = $this->get_faqs();		$this->load->view('manage/faqs',$data);		$this->load->view('templates/footer.php');	}		public function view_faqs(){        $dataheader['title'] =PROJECT_NAME.':FAQs';        $dataheader['sub_title'] ='FAQs';		$dataheader['no_details'] = 1;		$this->load->view('templates/header',$dataheader);		$data['faqs'] = $this->get_faqs();		$this->load->view('manage/view_faqs',$data);		$this->load->view('templates/footer.php');	}    public function fields(){        $this->set_header_data('','Field Display');        $data['displayFields'] = $this->get_displayed_fields();        $data['dbCols'] = $this->manage_model->get_active_column($data['displayFields']);        $this->load->view('manage/fields',$data);        $this->load->view('templates/footer.php');    }    public function save_fields(){        $this->manage_model->save_fields();    }				//Manage number of touches per record		//start of 2017-07-22 [max_touch]		public function setting_touches(){					$pdata = $this->input->post();		if(isset($pdata['no_of_touches'])){						//Saving			$update['lu_code'] = $pdata['no_of_touches'];			$this->db->update('lookup',$update,array('lu_cat'=>'max_touch'));					}							$this->set_header_data('','Manage Number of touches');				//retrieve max_touch setting		$max_touch = $this->getLookup('max_touch',0);		$data['max_touch'] = $max_touch[0]['lu_code'];						$this->load->view('manage/setting_touches',$data);		$this->load->view('templates/footer.php');		}	}?>